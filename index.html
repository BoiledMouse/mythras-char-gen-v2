<!DOCTYPE html>
<!--
  Mythras Character Generator (fixed version)

  This HTML file implements a Mythras character generator with
  navigation and age handling fixes and an updated look.  It loads
  the original logic from the upstream project and supplements it
  with a small helper script (nav-fix.js) to ensure the navigation
  bar and age information behave correctly.  A button has been
  added to roll attributes when using the roll method.  The
  appearance has been refreshed with a cleaner fantasy style.
-->
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mythras Character Generator</title>
  <!-- Custom styles for the improved look -->
  <link rel="stylesheet" href="style.css" />
  <!-- Our own game logic implementing a simplified and robust character generator -->
  <script src="script.js" defer></script>
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="overlay card">
      <h1>Mythras Character Generator</h1>
      <p class="subtitle">Create a unique adventurer ready for tavern tales</p>
    </header>
    <!-- Navigation bar -->
    <nav class="navbar overlay">
      <button type="button" class="navbtn active" data-target="basic">Basic Info</button>
      <button type="button" class="navbtn" data-target="attributes">Attributes</button>
      <button type="button" class="navbtn" data-target="skills">Skills</button>
      <button type="button" class="navbtn" data-target="equipment">Equipment</button>
      <button type="button" class="navbtn" data-target="summary">Summary</button>
    </nav>
    <!-- Step 1: Basic information -->
    <section id="basic" class="card overlay active">
      <h2>Basic Information</h2>
      <div class="form-group">
        <label for="nameInput">Character Name:</label>
        <input type="text" id="nameInput" />
      </div>
      <div class="form-group">
        <label for="ageCat">Age Category:</label>
        <select id="ageCat"></select>
        <span class="small" id="ageInfo"></span>
      </div>
      <div class="form-group">
        <label for="culture">Culture:</label>
        <select id="culture"></select>
      </div>
      <div class="form-group">
        <label for="career">Career:</label>
        <select id="career"></select>
      </div>
      <!-- Social class is determined randomly from your culture when you roll silver -->
      <div class="form-group">
        <label for="combatStyle">Combat Style:</label>
        <select id="combatStyle"></select>
      </div>
    </section>
    <!-- Step 2: Attributes -->
    <section id="attributes" class="card overlay">
      <h2>Attributes</h2>
      <div class="form-group">
        <button id="rollAttrBtn" type="button">Roll Attributes</button>
      </div>
      <div id="attributesInputs" class="attributes-grid">
        <div class="attr-row"><label for="STR">STR:</label><input type="number" id="STR" min="1" max="21" value="10" /></div>
        <div class="attr-row"><label for="CON">CON:</label><input type="number" id="CON" min="1" max="21" value="10" /></div>
        <div class="attr-row"><label for="SIZ">SIZ:</label><input type="number" id="SIZ" min="1" max="21" value="10" /></div>
        <div class="attr-row"><label for="DEX">DEX:</label><input type="number" id="DEX" min="1" max="21" value="10" /></div>
        <div class="attr-row"><label for="INT">INT:</label><input type="number" id="INT" min="1" max="21" value="10" /></div>
        <div class="attr-row"><label for="POW">POW:</label><input type="number" id="POW" min="1" max="21" value="10" /></div>
        <div class="attr-row"><label for="CHA">CHA:</label><input type="number" id="CHA" min="1" max="21" value="10" /></div>
      </div>
      <div id="derived" class="derived"></div>
    </section>
    <!-- Step 3: Skills -->
    <section id="skills" class="card overlay">
      <h2>Skills</h2>
      <p>Allocate your Culture, Career and Bonus points amongst the available skills. The table below shows each skillâ€™s base percentage (calculated from your attributes) and allows you to assign points. You cannot exceed the maximum increase per skill for each pool. The remaining points for each pool are displayed below.</p>
      <div class="skill-pools">
        <span>Culture points remaining: <strong id="culturePool">0</strong></span>
        <span style="margin-left:1em;">Career points remaining: <strong id="careerPool">0</strong></span>
        <span style="margin-left:1em;">Bonus points remaining: <strong id="bonusPool">0</strong></span>
      </div>
      <div class="table-responsive">
        <table>
          <thead>
            <tr>
              <th>Skill</th>
              <th>Base</th>
              <th>Culture</th>
              <th>Career</th>
              <th>Bonus</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody id="skillsTableBody"></tbody>
        </table>
      </div>
    </section>
    <!-- Step 4: Equipment -->
    <section id="equipment" class="card overlay">
      <h2>Equipment &amp; Wealth</h2>
      <p>Based on your culture and social standing, generate your starting silver. You can regenerate until you are satisfied.</p>
      <button id="rollSilverBtn" type="button">Roll Starting Silver</button>
      <p style="margin-top:0.5rem;">Starting Silver: <strong id="silverDisplay">0 sp</strong></p>
      <h3>Available Equipment</h3>
      <p>Items are grouped by type. Currently purchases are not subtracted from your total silver, but you may track them manually.</p>
      <div id="equipmentList"></div>
    </section>
    <!-- Step 5: Summary -->
    <section id="summary" class="card overlay">
      <h2>Character Summary</h2>
      <div id="summaryContent"></div>
    </section>
  </div>
</body>
</html>